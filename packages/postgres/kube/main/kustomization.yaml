apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: main
resources:
  - service-accounts.yaml

helmGlobals:
  chartHome: ../../charts
helmCharts:
  # name: $chartHome/dir
  - name: db
    namespace: main
    valuesFile: ./main.yaml
  - name: backup
    namespace: main
    valuesFile: ./main.yaml

configMapGenerator:
  - name: pgcat-config
    files:
      - ../../pgcat/pgcat.toml
  - name: patroni-config
    files:
      - ../../patroni/patroni.yaml
  - name: patroni-pgbackrest-config
    files:
      - ../../patroni/pgbackrest.conf
  - name: pgbackrest-server-config
    files:
      - ../../pgbackrest/pgbackrest.conf

generatorOptions:
  disableNameSuffixHash: false # changes the suffix hash of names so services automatically reload
